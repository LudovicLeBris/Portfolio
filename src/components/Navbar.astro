---
import Image from "astro/components/Image.astro"
import logo from '../assets/logos/LLB-light.svg'

const menuItems = [
    {
        title: 'Comp√©tences',
        path: '#skills'
    },
    {
        title: 'Projets',
        path: '#projects'
    },
    {
        title: 'A propos de moi',
        path: '#aboutMe'
    },
    {
        title: 'Restons en contact',
        path: '#contact'
    },
]
---

<div class="flex justify-between px-8 py-2 lg:items-center">
    <div>
        <Image src={logo} alt="Logo Ludovic Le Bris" width={64} loading={'eager'} />
    </div>
    <div class="relative">
        <div id="menuBurger">
            <svg 
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-8 h-8 lg:hidden">
                <path 
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
                />
            </svg>
        </div>
        <nav class="hidden lg:block absolute -right-full z-10  bg-white lg:bg-inherit">
            <ul class="flex flex-col gap-4 p-4 lg:flex-row min-w-max lg:gap-2 lg:p-0">
                {
                    menuItems.map((item) => (
                        <>
                        <li class="px-4 lg:px-2 hover:underline decoration-primary-light underline-offset-8">
                            <a href={item.path}>
                                {item.title}
                                </a>
                                </li>
                                </>
                                ))
                            }
                <li class="px-4 lg:px-2 hover:underline decoration-primary-light underline-offset-8">
                    <a href="/CV_LE_BRIS_Ludovic_2024.pdf" target="_blank">Obtenir mon CV</a>
                </li>
            </ul>
        </nav>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function ready() {
        
        // menu interaction
        const menuBurger = document.querySelector('#menuBurger') as HTMLElement;
        const navElement = document.querySelector('nav') as HTMLElement;

        const toggleNavBar = () => {
            navElement?.classList.toggle('hidden');
        }

        menuBurger?.addEventListener('click', (event) => {
            console.log(event.target);
            toggleNavBar();
        })

        document.addEventListener('click', (event: MouseEvent) => {
            const elementClicked = (event.target as HTMLElement).parentNode
            if (!menuBurger.contains(elementClicked) && !navElement?.classList.contains('hidden')) {
                toggleNavBar()
            }
        })

    })
</script>